(function(e){function t(t){for(var r,n,i=t[0],l=t[1],c=t[2],d=0,u=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&u.push(o[n][0]),o[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);h&&h(t);while(u.length)u.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,n=1;n<a.length;n++){var i=a[n];0!==o[i]&&(r=!1)}r&&(s.splice(t--,1),e=l(l.s=a[0]))}return e}var r={},n={app:0},o={app:0},s=[];function i(e){return l.p+"js/"+({TabEditorChannel:"TabEditorChannel",about:"about"}[e]||e)+"."+{TabEditorChannel:"022ce559",about:"dd8d9938"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={TabEditorChannel:1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=new Promise((function(t,a){for(var r="css/"+({TabEditorChannel:"TabEditorChannel",about:"about"}[e]||e)+"."+{TabEditorChannel:"5dfcf230",about:"31d6cfe0"}[e]+".css",o=l.p+r,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var c=s[i],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===r||d===o))return t()}var u=document.getElementsByTagName("style");for(i=0;i<u.length;i++){c=u[i],d=c.getAttribute("data-href");if(d===r||d===o)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var r=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete n[e],h.parentNode.removeChild(h),a(s)},h.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){n[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,a){r=o[e]=[t,a]}));t.push(r[2]=s);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=i(e);var u=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(h);var a=o[e];if(0!==a){if(a){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",u.name="ChunkLoadError",u.type=r,u.request=n,a[1](u)}o[e]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(a,r,function(t){return e[t]}.bind(null,r));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var h=d;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t),a.d(t,"EventBus",(function(){return Ve}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"","clipped-left":"","clipped-right":""}},[a("v-app-bar-nav-icon",{attrs:{disabled:"",_click:"drawer = !drawer"}}),a("v-toolbar-title",[e._v("Dashboard")]),a("v-spacer"),a("v-badge",e._b({attrs:{content:e.alertCount,dot:e.hideAlertBadge,color:"error",left:"",_overlap:"","offset-x":"23","offset-y":"23"}},"v-badge",e.alertBadgeIconProp,!1),[a("v-btn",{attrs:{icon:""},on:{click:e.openAlertSheet}},[a("v-icon",[e._v("mdi-bell")])],1)],1),a("v-tooltip",{attrs:{bottom:"","open-delay":1e3},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""},on:{click:e.changeDarkMode}},"v-btn",n,!1),r),[a("v-icon",[e._v("mdi-theme-light-dark")])],1)]}}])},[a("span",[e._v("Switch to day/night mode")])]),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.showSettingDialog=!0}}},[a("v-icon",[e._v("mdi-cog")])],1)],1),a("v-main",[e.socketConnected?e._e():a("v-banner",{attrs:{app:"","single-line":"",_color:"white",icon:"mdi-wifi-strength-alert-outline","icon-color":"red"},scopedSlots:e._u([{key:"actions",fn:function(){return[a("v-btn",{attrs:{text:"",color:"primary",loading:e.btnSocketReconnectLoading,disabled:e.btnSocketReconnectLoading},on:{click:e.reconnectSocket}},[e._v(" Reconnect ")])]},proxy:!0}],null,!1,2500245156)},[e._v(" Lost socket connection to API Server ")]),a("v-container",{attrs:{fluid:""}},[e.skeletonLoading?a("v-row",e._l(9,(function(e){return a("v-col",{key:e,attrs:{cols:"12",lg:"3"}},[a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{_loading:"skeletonLoading",transition:"scale-transition","max-width":"300",type:"card"}})],1)})),1):0==e.hostsReport.length?a("v-row",[a("v-col",[e.apiError?e.socketConnected?a("v-alert",{attrs:{text:"",color:"info",border:"left"}},[a("div",[e._v("Please waiting for the first report being aggregated at CentMonit...")])]):a("v-alert",{attrs:{text:"",color:"error",border:"left"}},[a("h3",{staticClass:"headline"},[e._v(e._s(e.apiErrorMessage))]),a("div",[e._v(" Is CentMonit daemon process running normally on the server side (at address "+e._s(""+this.$GCONFIG.api_base_url)+")?"),a("br"),e._v(" Try restart it then reload your browser (Ctrl + F5). ")])]):a("v-alert",{attrs:{text:"",color:"info",border:"left"}},[a("h3",{staticClass:"headline"},[e._v("No data found")]),a("div",[e._v(" You may need to wait for CentMonit to receive first report data from Monit agents."),a("br"),e._v(" If you've waited so long, then check your Monit log (/var/log/monit.log) to see whether it successfully send report data to CentMonit?"),a("br"),e._v(" Please follow the setup manual from installation folder to verify Monit and CentMonit's configuration. ")])])],1)],1):a("div",[a("v-row",{staticClass:"justify-center"},[a("span",{class:[e.lastReportTimeStyleClass],staticStyle:{color:"#2196F3"}},[e._v(" Good hosts: "+e._s(e.totalGoodHosts())+"/"+e._s(Object.keys(e.hostsState).length)+" - Last report: "+e._s(e.lastHostsReportTime.toLocaleString())+" ")])]),a("v-row",e._l(e.hostsReport,(function(t,r){return a("v-col",{key:r+"-"+t.alertMessage,attrs:{_key:"index",cols:"12",_sm:"6",md:"6",lg:"4"}},[a("HostCard",{attrs:{report:t},on:{hostStateChanged:e.onHostStateChanged}})],1)})),1)],1),a("v-bottom-sheet",{staticStyle:{"overflow-y":"scroll"},model:{value:e.alertSheet,callback:function(t){e.alertSheet=t},expression:"alertSheet"}},[a("v-card",[a("v-card-title",{attrs:{_class:"justify-center"}},[a("span",{staticClass:"text-subtitle-1"},[e._v("Realtime Channel")]),a("v-icon",[e._v("mdi-circle-small")]),a("span",{class:[e.socketStatusStyleClass]},[e._v(e._s(e.socketConnectionStatusDesc))]),a("v-spacer"),a("v-tooltip",{attrs:{bottom:"","open-delay":1e3},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""},on:{click:e.alertReset}},"v-btn",n,!1),r),[a("v-icon",[e._v("mdi-notification-clear-all")])],1)]}}])},[a("span",[e._v("Clear all messages (old messages will be removed automatically)")])]),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.alertSheet=!e.alertSheet}}},[a("v-icon",[e._v("mdi-chevron-down")])],1)],1),a("v-divider"),a("v-card-text",{staticClass:"pt-4",staticStyle:{height:"80vh","overflow-y":"scroll"}},[e.socketConnected?e._e():a("div",{staticClass:"text-center"},[a("v-btn",{staticClass:"mb-2",attrs:{loading:e.btnSocketReconnectLoading,disabled:e.btnSocketReconnectLoading,outlined:"",color:"primary"},on:{click:e.reconnectSocket}},[e._v(" Reconnect "),a("v-icon",{attrs:{right:""}},[e._v("mdi-sync")])],1)],1),e._l(e.alert_messages,(function(t,r){return a("v-alert",{key:r,attrs:{border:"left","colored-border":"",color:e.getAlertColor(t.type),elevation:"1"}},[Boolean(t.host)?a("span",{staticClass:"text-subtile-1 font-weight-bold"},[e._v(" "+e._s(t.host)+" "),Boolean(t.service)?[a("v-icon",{attrs:{small:""}},[e._v("mdi-circle-small")]),e._v(" "+e._s(t.service)+" ")]:e._e(),a("br")],2):e._e(),a("span",{staticClass:"text-caption"},[a("v-icon",{attrs:{small:""}},[e._v("mdi-calendar-clock")]),e._v(" "+e._s(t.time.toLocaleString())),a("br")],1),Boolean(t.serviceTypeDesc)?a("span",{staticClass:"text-caption"},[a("v-icon",{attrs:{small:""}},[e._v("mdi-tag-text-outline")]),e._v(" "+e._s(t.serviceTypeDesc)),a("br")],1):e._e(),a("div",{staticClass:"mt-1"},[e._v(" "+e._s(t.message)+" ")])])}))],2)],1)],1),e.showSettingDialog?a("Setting",{on:{closeDialog:function(t){e.showSettingDialog=!1}}}):e._e()],1)],1),a("v-footer",{attrs:{app:"",_class:"grey _dark_en-3 white--text"}},[a("div",{staticClass:"text-caption",attrs:{_class:"ml-3 text-caption text-sm-body-2"}},[e._v(" Made with "),a("v-icon",{staticClass:"red--text",staticStyle:{"vertical-align":"middle"},attrs:{small:""}},[e._v("mdi-heart-outline")]),e._v(" by "),a("a",{attrs:{_class:"white--text",href:"https://vuetifyjs.com",target:"_blank"}},[e._v("Vuetify")])],1),a("v-spacer"),a("div",{staticClass:"font-italic caption",attrs:{_class:"mr-3 hidden-xs-only"}},[e._v(" Version "+e._s(e.APP_VERSION)+" ")])],1)],1)},o=[],s=(a("4de4"),a("4160"),a("b64b"),a("d3b7"),a("159b"),a("5530")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"350","min-height":"206",_click:"test"}},[a("v-list-item",{attrs:{"_three-line":""}},[a("v-list-item-avatar",[a("v-icon",{class:"mdi-loading"===e.hostLedDesc[1]?"mdi-spin":"",attrs:{color:e.hostLedDesc[0]}},[e._v(e._s(e.hostLedDesc[1]))])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"text-subtile-1 font-weight-bold"},[e._v(" "+e._s(e.report.hostname)+" ")]),a("v-list-item-subtitle",{staticClass:"text-caption"},[a("span",[e._v(e._s(e.uptimeDesc)+" monit up")]),a("v-icon",{attrs:{small:""}},[e._v("mdi-circle-small")]),a("span",[e._v(e._s(e.pollTimeDesc)+" poll-cycle")])],1)],1)],1),a("v-card-text",[e.report.alertMessage?a("v-row",{staticClass:"text-center"},[a("v-col",{attrs:{cols:"12"}},[a("div",[e._v(e._s(e.report.alertMessage))])])],1):a("v-row",{staticClass:"text-center"},[a("v-col",{attrs:{cols:"4"}},[a("div",[a("span",{staticClass:"text-h4"},[e._v(e._s(e.report.goodServices))]),a("span",{staticClass:"text-caption"},[e._v(" /"+e._s(e.report.services))])]),a("div",[e._v("OK")])]),a("v-col",{attrs:{cols:"4"}},[a("div",{staticClass:"text-h4"},[e._v(e._s(e.report.failServices))]),a("div",[e._v("Fail")])]),a("v-col",{attrs:{cols:"4"}},[a("div",{staticClass:"text-h4"},[e._v(e._s(e.report.skipServices))]),a("div",[e._v("Skip")])])],1)],1),a("v-card-actions",[a("div",[a("span",{class:[e.cpuTextColor]},[e._v(e._s(e.cpuDesc)+" cpu")]),a("v-icon",{attrs:{small:""}},[e._v("mdi-circle-small")]),a("span",{class:[e.ramTextColor]},[e._v(e._s(e.ramDesc)+" ram")])],1),a("v-spacer"),a("v-tooltip",{attrs:{color:e.hostLedDesc[0],top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",n,!1),r),[a("v-icon",[e._v("mdi-table")])],1)]}}]),model:{value:e.tooltipModel,callback:function(t){e.tooltipModel=t},expression:"tooltipModel"}},[a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("Service")]),a("th",{staticClass:"text-left"},[e._v("Type")]),a("th",{staticClass:"text-left"},[e._v("Monitor")]),a("th",{staticClass:"text-left"},[e._v("Status")])])]),a("tbody",e._l(e.hostServices,(function(t){return a("tr",{key:e.report.id+"-"+t.name},[a("td",[e._v(e._s(t.name))]),a("td",[e._v(e._s(t.type))]),a("td",[e._v(e._s(e.getServiceMonitorDesc(t.monitor)))]),a("td",[a("v-icon",{attrs:{small:"",color:e.getServiceStatusColor(t.status)}},[e._v(" mdi-circle-medium ")])],1)])})),0)]},proxy:!0}])})],1)],1)],1)},l=[],c=(a("99af"),a("b680"),a("bc3a")),d=a.n(c),u={props:["report"],data:function(){return{tooltipModel:!1,hostServices:[]}},watch:{tooltipModel:function(e){e&&this.__pre_fetch_services__()},report:{handler:function(e){e.alertMessage&&(this.hostServices=[])},deep:!0}},computed:{uptimeDesc:function(){var e=this.report.uptime;switch(!0){case e<60:return"".concat(e," secs");case e<3600:return"".concat((e/60).toFixed(1)," mins");case e<86400:return"".concat((e/3600).toFixed(1)," hrs");default:return"".concat((e/86400).toFixed(1)," days")}},pollTimeDesc:function(){var e=this.report.poll;switch(!0){case e<60:return"".concat(e," secs");case e<3600:return"".concat((e/60).toFixed(1)," mins");case e<86400:return"".concat((e/3600).toFixed(1)," hrs");default:return"".concat((e/86400).toFixed(1)," days")}},cpuDesc:function(){return this.report.cpu.toFixed(1)+"%"},ramDesc:function(){return this.report.ram.toFixed(1)+"%"},cpuTextColor:function(){var e="";switch(!0){case this.report.cpu<80:break;case this.report.cpu<95:e="amber--text";break;case this.report.cpu>=95:e="red--text";break}return e},ramTextColor:function(){var e="";switch(!0){case this.report.ram<80:break;case this.report.ram<95:e="amber--text";break;case this.report.ram>=95:e="red--text";break}return e},hostLedDesc:function(){var e="grey",t="mdi-loading",a="loading";return this.report.alertMessage?(e="red",t="mdi-message-alert"):this.report.services===this.report.failServices?(e="red",t="mdi-alert"):this.report.skipServices>=1||this.report.failServices>=1?(e="amber",t="mdi-alert"):this.report.services===this.report.goodServices&&(e="green",t="mdi-check-bold",a="good"),this.$emit("hostStateChanged",{id:this.report.id,status:a}),[e,t]}},created:function(){this.__pre_fetch_services__()},methods:{__pre_fetch_services__:function(){var e=this;if(!this.report.alertMessage){var t=this.report.id;d.a.get("".concat(this.$GCONFIG.api_base_url,"/api/hosts/").concat(t,"/report")).then((function(t){console.log("HostCard::__pre_fetch_services__() - get report response:",t),t.data.length>0&&(e.hostServices=[],t.data.forEach((function(t){e.hostServices.push(t)})))})).catch((function(e){console.log("HostCard::__pre_fetch_services__() - get report error:",e)}))}},getServiceStatusColor:function(e){switch(e){case 0:return"success";default:return"error"}},getServiceMonitorDesc:function(e){switch(e){case 1:return"Yes";case 0:return"No";case 2:return"Initializing...";default:return"UNKNOWN"}}}},h=u,p=a("2877"),v=a("6544"),m=a.n(v),f=a("8336"),_=a("b0af"),b=a("99d9"),g=a("62ad"),C=a("132d"),S=a("da13"),x=a("8270"),w=a("5d23"),k=a("0fd9"),y=a("1f4f"),T=a("2fa4"),E=a("3a2f"),A=Object(p["a"])(h,i,l,!1,null,null,null),R=A.exports;m()(A,{VBtn:f["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["b"],VCol:g["a"],VIcon:C["a"],VListItem:S["a"],VListItemAvatar:x["a"],VListItemContent:w["a"],VListItemSubtitle:w["b"],VListItemTitle:w["c"],VRow:k["a"],VSimpleTable:y["a"],VSpacer:T["a"],VTooltip:E["a"]});var V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{value:!0,fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},on:{input:function(t){return e.$emit("closeDialog")}}},[a("v-card",[a("v-toolbar",{attrs:{outlined:""}},[a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$emit("closeDialog")}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-toolbar-title",[e._v("Settings")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{text:""},on:{click:e.createSomethingNew}},[e._v(" Add new "),a("v-icon",{attrs:{right:""}},[e._v("mdi-plus-circle-outline")])],1)],1)],1),a("v-tabs",{attrs:{right:""},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[a("v-tab",{attrs:{href:"#tabAlertRule"}},[e._v("Alert Rules")]),a("v-tab",{attrs:{href:"#tabChannel"}},[e._v("Alert Channels")])],1),a("v-card-text",[a("v-tabs-items",{model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[a("v-tab-item",{attrs:{value:"tabAlertRule"}},[a("TabViewAlertRule")],1),a("v-tab-item",{attrs:{value:"tabChannel"}},[a("TabViewChannel")],1),a("v-tab-item",{attrs:{value:"tabMailGroup"}},[e._v(" tabMailGroup ")])],1)],1)],1),e.showEditForm?a(e.currentEditForm,{tag:"component",on:{closeDialog:function(t){e.showEditForm=!1}}}):e._e()],1)},D=[],N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",e._l(Math.ceil(e.alert_channels.length/3),(function(t){return a("v-row",{key:"row-"+t},[e._l(3,(function(r){return[3*(t-1)+(r-1)<e.alert_channels.length?a("v-col",{key:"col-"+t+"-"+r},[a("v-card",{attrs:{"min-height":"195","min-width":"195"}},[a("v-card-title",[a("v-icon",{attrs:{small:"",left:""}},[e._v(e._s(e.getChannelTypeIcon(e.alert_channels[3*(t-1)+(r-1)].type)))]),a("span",{staticClass:"text-subtitle-2 d-inline-block _text-truncate",style:e.cardTitleNameStyle},[e._v(e._s(e.alert_channels[3*(t-1)+(r-1)].name))]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(a){e.removeChannel(e.alert_channels[3*(t-1)+(r-1)].id)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)],1),1===e.alert_channels[3*(t-1)+(r-1)].type?a("v-card-text",[a("span",{staticClass:"text-caption text--disabled"},[e._v("Webhook URL")]),e._v(" "),a("span",{staticClass:"text-body-2"},[e._v(e._s(e.alert_channels[3*(t-1)+(r-1)].webhook_url))])]):a("v-card-text",[a("div",[a("span",{staticClass:"text-caption text--disabled"},[e._v("Host")]),e._v(" "),a("span",{staticClass:"text-body-2"},[e._v(e._s(e.alert_channels[3*(t-1)+(r-1)].host))])]),a("div",[a("span",{staticClass:"text-caption text--disabled"},[e._v("Port")]),e._v(" "),a("span",{staticClass:"text-body-2"},[e._v(e._s(e.alert_channels[3*(t-1)+(r-1)].port))])]),a("div",[a("span",{staticClass:"text-caption text--disabled"},[e._v("SSL")]),e._v(" "),a("span",{staticClass:"text-body-2"},[e._v(" "+e._s(e.alert_channels[3*(t-1)+(r-1)].ssl?"Yes":"No")+" ")])]),a("div",[a("span",{staticClass:"text-caption text--disabled"},[e._v("Username")]),e._v(" "),a("span",{staticClass:"text-body-2"},[e._v(" "+e._s(e.alert_channels[3*(t-1)+(r-1)].user?e.alert_channels[3*(t-1)+(r-1)].user:"N/A")+" ")])]),a("div",[a("span",{staticClass:"text-caption text--disabled"},[e._v("Password")]),e._v(" "),a("span",{staticClass:"text-body-2"},[e._v(" "+e._s(e.alert_channels[3*(t-1)+(r-1)].passwd?e.alert_channels[3*(t-1)+(r-1)].passwd:"N/A")+" ")])])])],1)],1):e._e()]}))],2)})),1)},O=[],M=(a("b0c0"),a("2f62")),L={data:function(){return{}},computed:Object(s["a"])(Object(s["a"])({},Object(M["b"])(["alert_channels"])),{},{cardTitleNameStyle:function(){var e="max-width: 120px";switch(this.$vuetify.breakpoint.name){case"lg":e="max-width: 16vw";break;case"xl":e="max-width: 17vw";break}return e}}),created:function(){console.log("TabViewChannel::created()...")},methods:{getChannelTypeIcon:function(e){switch(e){case 1:return"mdi-slack";case 2:return"mdi-email"}},removeChannel:function(e){var t=this;console.log("TabViewChannel::removeChannel() with id:",e),d.a.delete("".concat(this.$GCONFIG.api_base_url,"/api/channels/").concat(e)).then((function(a){console.log("TabViewChannel::removeChannel() - get report response:",a),a.data&&("success"===a.data.status?t.$store.commit("REMOVE_ALERT_CHANNEL",e):console.warn("TabViewChannel::removeChannel() - something is wrongs at backend"))})).catch((function(e){console.log("TabViewChannel::removeChannel() - get report error:",e)}))}}},$=L,I=a("a523"),j=Object(p["a"])($,N,O,!1,null,null,null),F=j.exports;m()(j,{VBtn:f["a"],VCard:_["a"],VCardText:b["b"],VCardTitle:b["c"],VCol:g["a"],VContainer:I["a"],VIcon:C["a"],VRow:k["a"],VSpacer:T["a"]});var H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-simple-table",{attrs:{"fixed-header":"",height:"75vh"},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("Rule Name")]),a("th",{staticClass:"text-left"},[e._v("Filters")]),a("th",{staticClass:"text-left"},[e._v("Alert configuration")]),a("th",{staticClass:"text-left"},[e._v("Actions")])])]),a("tbody",e._l(e.alertRules,(function(t,r){return a("tr",{key:"item.name"+r},[a("td",{staticClass:"text-caption"},[e._v(e._s(t.name))]),a("td",{staticClass:"text-caption",domProps:{innerHTML:e._s(e.getDisplayTextOfFilters(r))}}),a("td",{staticClass:"text-caption",domProps:{innerHTML:e._s(e.getDisplayTextOfAlertConf(r))}}),a("td",[a("v-btn",{attrs:{icon:""},on:{click:function(a){return e.editRow(t.id,r)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")])],1),a("v-btn",{attrs:{icon:""},on:{click:function(a){return e.deleteRow(t.id,r)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-delete")])],1)],1)])})),0)]},proxy:!0}])}),e.showEditForm?a("TabEditorAlertRule",{attrs:{mode:"EDIT",alertRuleObject:e.editedObject},on:{closeDialog:function(t){e.showEditForm=!1}}}):e._e()],1)},P=[],G=(a("a434"),a("ac1f"),a("1276"),a("bac9")),B={components:{TabEditorAlertRule:G["default"]},data:function(){return{alertRules:[],showEditForm:!1,editedObject:{}}},created:function(){var e=this;d.a.get("".concat(this.$GCONFIG.api_base_url,"/api/alert-rules")).then((function(t){console.log("TabViewAlertRule::created() - api response:",t),t.data.length>0&&t.data.forEach((function(t){e.alertRules.push(t)}))})).catch((function(e){console.log("TabViewAlertRule::created() - api error:",e)}))},mounted:function(){Ve.$on("NEW_ALERT_RULE_INSERTED",this.__rule_insert_handler__),Ve.$on("NEW_ALERT_RULE_UPDATED",this.__rule_update_handler__)},beforeDestroy:function(){Ve.$off("NEW_ALERT_RULE_INSERTED",this.__rule_insert_handler__),Ve.$off("NEW_ALERT_RULE_UPDATED",this.__rule_update_handler__)},methods:{__rule_insert_handler__:function(e){console.warn("TabViewAlertRule::__rule_insert_handler__() - item:",e),this.alertRules.splice(0,0,e)},__rule_update_handler__:function(e){console.warn("TabViewAlertRule::__rule_update_handler__() - item:",e),this.alertRules.forEach((function(t){t.id===e.id&&(t.name=e.name,t.filters=e.filters,t.alertConf=e.alertConf)}))},getDisplayTextOfFilters:function(e){var t=this.alertRules[e].filters,a="";return JSON.parse(t).forEach((function(e){if(1===e.services.length)a+='<span class="text--disabled">Host</span> '.concat(e.host,'<span class="text--disabled"> - Services</span> ').concat(e.services,"<br/>");else{var t="<ul>";e.services.forEach((function(e){t+="<li>".concat(e,"</li>")})),t+="</ul>",a+='<span class="text--disabled">Host</span> '.concat(e.host,'<span class="text--disabled"> - Services</span> ').concat(t)}})),a},getDisplayTextOfAlertConf:function(e){var t=JSON.parse(this.alertRules[e].alertConf),a="";return"SMTP"===t.type?(a='<span class="text--disabled">SMTP</span> '.concat(t.name,"<br/>"),a+='<span class="text--disabled">Receivers</span><br/>',a+="<ul>",t.smtpReceivers.split("\n").forEach((function(e){a+="<li>".concat(e,"</li>")})),a+="</ul>"):a='<span class="text--disabled">Slack webhook</span> '.concat(t.name),a},editRow:function(e,t){this.showEditForm=!0,this.editedObject=this.alertRules[t]},deleteRow:function(e,t){var a=this;d.a.delete("".concat(this.$GCONFIG.api_base_url,"/api/alert-rules/").concat(e)).then((function(e){console.log("TabViewAlertRule::deleteRow() - get report response:",e),e.data&&("success"===e.data.status?a.alertRules.splice(t,1):console.warn("TabViewAlertRule::deleteRow() - something is wrongs at backend"))})).catch((function(e){console.log("TabViewAlertRule::deleteRow() - get report error:",e)}))}}},U=B,J=Object(p["a"])(U,H,P,!1,null,null,null),W=J.exports;m()(J,{VBtn:f["a"],VIcon:C["a"],VSimpleTable:y["a"]});var q={components:{TabViewChannel:F,TabViewAlertRule:W},data:function(){return{currentTab:"tabAlertRule",showEditForm:!1,currentEditForm:null}},mounted:function(){var e=this;d.a.get("".concat(this.$GCONFIG.api_base_url,"/api/channels")).then((function(t){console.log("TabViewChannel::created() - api response:",t),t.data.length>0&&(e.$store.commit("PURGE_ALERT_CHANNEL"),t.data.forEach((function(t){e.$store.commit("ADD_ALERT_CHANNEL",t)})))})).catch((function(e){console.log("TabViewChannel::created() - api error:",e)}))},methods:{createSomethingNew:function(){"tabChannel"===this.currentTab?(this.currentEditForm=function(){return a.e("TabEditorChannel").then(a.bind(null,"5a4f"))},this.showEditForm=!0):"tabAlertRule"===this.currentTab&&(this.currentEditForm=function(){return Promise.resolve().then(a.bind(null,"bac9"))},this.showEditForm=!0)}}},K=q,Y=a("169a"),z=a("71a3"),Q=a("c671"),X=a("fe57"),Z=a("aac8"),ee=a("71d9"),te=a("2a7f"),ae=Object(p["a"])(K,V,D,!1,null,null,null),re=ae.exports;m()(ae,{VBtn:f["a"],VCard:_["a"],VCardText:b["b"],VDialog:Y["a"],VIcon:C["a"],VSpacer:T["a"],VTab:z["a"],VTabItem:Q["a"],VTabs:X["a"],VTabsItems:Z["a"],VToolbar:ee["a"],VToolbarItems:te["a"],VToolbarTitle:te["b"]});var ne={name:"App",components:{HostCard:R,Setting:re},data:function(){return{APP_VERSION:"2020.0-beta3",num:1,apiError:!1,apiErrorMessage:null,skeletonLoading:!0,drawer:!1,drawerRight:!1,alertSheet:!1,alertCount:0,alertEvents:[],items:[{title:"Dashboard",icon:"mdi-view-dashboard"},{title:"Photos",icon:"mdi-image"},{title:"About",icon:"mdi-help-box"}],socketConnection:null,socketConnected:!1,btnSocketReconnectLoading:!1,hostsReport:[],lastHostsReportTime:null,lastReportTimeStyleClass:"",hostsState:{},hostsNextReportTime:{},showSettingDialog:!1}},computed:Object(s["a"])(Object(s["a"])({},Object(M["b"])(["app_dark_mode","alert_messages"])),{},{hideAlertBadge:function(){return 0==this.alertCount&&this.socketConnected},alertBadgeIconProp:function(){return this.socketConnected?"":{icon:"mdi-close"}},socketConnectionStatusDesc:function(){return this.socketConnected?"connected":"not connect"},socketStatusStyleClass:function(){return this.socketConnected?"text-caption green--text":"text-caption red--text"}}),watch:{alertCount:function(e){document.title=0==e?"CentMonit":e<99?"(".concat(e,") CentMonit"):"(99+) CentMonit"}},created:function(){var e=this;console.log("App::created()..."),this.$vuetify.theme.dark=this.app_dark_mode,d.a.get("".concat(this.$GCONFIG.api_base_url,"/api/hosts/report")).then((function(t){console.log("App::created() - get report response:",t),e.hostsReport=t.data,e.lastHostsReportTime=new Date,e.hostsReport.forEach((function(t){e.$store.commit("ADD_HOST",t.hostname),t.alertMessage||e.$set(e.hostsNextReportTime,t.id,(new Date).getTime()+1e3*t.poll)}))})).catch((function(t){console.log("App::created() - get report error:",t),e.apiError=!0,e.apiErrorMessage=t.message})).finally((function(){setTimeout((function(){e.skeletonLoading=!1}),1500)})),this.__init_socket_connection__()},mounted:function(){var e=this;console.log("App:mounted()...");var t="bgJobID",a=localStorage.getItem(t);a&&(clearInterval(parseInt(a,10)),console.log("Cleared background job with id",a)),a=setInterval((function(){var t=e.hostsNextReportTime;Object.keys(t).forEach((function(a){var r=t[a],n=(new Date).getTime();n>r&&e.hostsReport.forEach((function(t){t.id===a&&(console.warn("No report from ",a,"-",t.hostname),t.alertMessage="No report within poll cycle",e.socketConnected||console.warn("Pls check socket connection..."))}))}))}),1e4),localStorage.setItem(t,a),console.log("Saved background job with id",a)},methods:{__highlight_report_time_text__:function(){var e=this;this.lastReportTimeStyleClass="blinking",setTimeout((function(){e.lastReportTimeStyleClass=""}),3500)},__init_socket_connection__:function(){var e=this;this.socketConnection=new WebSocket(this.$GCONFIG.socket_url),this.socketConnection.onopen=function(){console.log("App::socket::onopen..."),e.socketConnected=!0},this.socketConnection.onerror=function(){console.error("App::socket::error..."),e.btnSocketReconnectLoading&&(e.btnSocketReconnectLoading=!1,e.$toast.open({message:"Could not establish socket connection",type:"error"}))},this.socketConnection.onclose=function(){console.error("App::socket::close..."),e.socketConnected=!1},this.socketConnection.onmessage=function(t){var a=JSON.parse(t.data);if("EVENT"===a.channel)e.alertSheet||e.alertCount++,a["time"]=new Date,e.$store.commit("ADD_ALERT_MESSAGE",a),"Monit"===a.service&&e.hostsReport.forEach((function(t){t.hostname===a.host&&("error"===a.type?(t.alertMessage=a.message,delete e.hostsNextReportTime[t.id]):"success"===a.type&&(t.alertMessage=""))}));else if("HOST"===a.channel){e.lastHostsReportTime=new Date,e.__highlight_report_time_text__();for(var r=!1,n=0;n<e.hostsReport.length;n++){var o=e.hostsReport[n];if(o.id===a.id){o.poll=a.poll,o.uptime=a.uptime,o.ram=a.ram,o.cpu=a.cpu,o.services=a.services,o.goodServices=a.goodServices,o.failServices=a.failServices,o.skipServices=a.skipServices,o.alertMessage="",e.$set(e.hostsNextReportTime,a.id,(new Date).getTime()+1e3*o.poll),r=!0;break}}r||(e.hostsReport.push({id:a.id,poll:a.poll,hostname:a.hostname,uptime:a.uptime,ram:a.ram,cpu:a.cpu,services:a.services,goodServices:a.goodServices,failServices:a.failServices,skipServices:a.skipServices}),e.$set(e.hostsNextReportTime,a.id,(new Date).getTime()+1e3*a.poll),e.$store.commit("ADD_HOST",a.hostname))}}},test:function(){var e="".concat(this.num," Lorem ipsum dolor sit amet consectetur, adipisicing elit<br/>\n        Amet nulla obcaecati laudantium assumenda autem ex qui, non quisquam alias officia?<br/>\n        Neque nulla libero corporis eos atque facilis illum aliquid inventore?");this.num%3==0?this.$toast.open({message:e,type:"error"}):this.$toast.open({message:e}),this.num++},changeDarkMode:function(){var e=!this.app_dark_mode;this.$vuetify.theme.dark=e,this.$store.commit("SET_DARK_MODE",e)},openAlertSheet:function(){this.alertCount=0,this.alertSheet=!this.alertSheet},getAlertColor:function(e){switch(e){case"info":return"info";case"success":return"success";case"error":return"error";case"warning":return"warning";default:return""}},alertReset:function(){this.alertCount=0,this.$store.commit("CLEAR_ALERT_MESSAGES")},reconnectSocket:function(){console.log("App::reconnectSocket()..."),this.btnSocketReconnectLoading=!0,this.__init_socket_connection__()},totalGoodHosts:function(){var e=this;return Object.keys(this.hostsState).filter((function(t){return"good"===e.hostsState[t]})).length},onHostStateChanged:function(e){console.log("App::onHostStateChanged() - payload:",e),this.$set(this.hostsState,e.id,e.status)}}},oe=ne,se=(a("f0e8"),a("0798")),ie=a("7496"),le=a("40dc"),ce=a("5bc1"),de=a("4ca6"),ue=a("e4e5"),he=a("288c"),pe=a("ce7e"),ve=a("553a"),me=a("f6c4"),fe=a("3129"),_e=Object(p["a"])(oe,n,o,!1,null,"46795d44",null),be=_e.exports;m()(_e,{VAlert:se["a"],VApp:ie["a"],VAppBar:le["a"],VAppBarNavIcon:ce["a"],VBadge:de["a"],VBanner:ue["a"],VBottomSheet:he["a"],VBtn:f["a"],VCard:_["a"],VCardText:b["b"],VCardTitle:b["c"],VCol:g["a"],VContainer:I["a"],VDivider:pe["a"],VFooter:ve["a"],VIcon:C["a"],VMain:me["a"],VRow:k["a"],VSkeletonLoader:fe["a"],VSpacer:T["a"],VToolbarTitle:te["b"],VTooltip:E["a"]});var ge=a("8c4f");r["default"].use(ge["a"]);var Ce=[{path:"/",name:"route-dashboard"},{path:"/setting",name:"route-setting-page",component:function(){return a.e("about").then(a.bind(null,"e80b"))}}],Se=new ge["a"]({mode:"history",base:"/",routes:Ce}),xe=Se,we=(a("c975"),a("bfa9"));r["default"].use(M["a"]);var ke=new we["a"]({key:"app-store",storage:window.localStorage,reducer:function(e){return{app_dark_mode:e.app_dark_mode,alert_messages:e.alert_messages}}}),ye=new M["a"].Store({plugins:[ke.plugin],state:{app_dark_mode:!1,alert_messages:[],hostnames:[],alert_channels:[]},mutations:{SET_DARK_MODE:function(e,t){e.app_dark_mode=t},ADD_ALERT_MESSAGE:function(e,t){var a=99;e.alert_messages.splice(0,0,t),e.alert_messages.length>a&&e.alert_messages.pop()},CLEAR_ALERT_MESSAGES:function(e){e.alert_messages=[]},ADD_HOST:function(e,t){-1===e.hostnames.indexOf(t)&&e.hostnames.splice(0,0,t)},PURGE_ALERT_CHANNEL:function(e){e.alert_channels=[]},ADD_ALERT_CHANNEL:function(e,t){e.alert_channels.splice(0,0,t)},REMOVE_ALERT_CHANNEL:function(e,t){for(var a=0;a<e.alert_channels.length;a++)if(e.alert_channels[a].id===t){e.alert_channels.splice(a,1);break}}},getters:{host_array:function(e){return e.hostnames},slack_iwh_alert_channel:function(e){var t=[];return e.alert_channels.forEach((function(e){1===e.type&&t.push({id:e.id,name:e.name})})),t},smtp_alert_channel:function(e){var t=[];return e.alert_channels.forEach((function(e){2===e.type&&t.push({id:e.id,name:e.name})})),t}},actions:{},modules:{}}),Te=a("f309");r["default"].use(Te["a"]);var Ee=new Te["a"]({theme:{}}),Ae=a("b079"),Re=a.n(Ae);a("ce8c");r["default"].config.productionTip=!1;var Ve=new r["default"];r["default"].use(Re.a,{type:"success",position:"bottom",duration:5e3,pauseOnHover:!0}),d.a.get("/config.json").then((function(e){console.log("main() get config response:",e.data),r["default"].prototype.$GCONFIG=e.data,new r["default"]({router:xe,store:ye,vuetify:Ee,render:function(e){return e(be)}}).$mount("#app")}))},"9ace":function(e,t,a){},bac9:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{value:!0,"min-width":"90vw"},on:{input:function(t){return e.$emit("closeDialog")}}},[a("v-stepper",{model:{value:e.currentStep,callback:function(t){e.currentStep=t},expression:"currentStep"}},[a("v-stepper-header",[a("v-stepper-step",{attrs:{complete:e.currentStep>1,step:"1"}},[e._v("Rule name")]),a("v-divider"),a("v-stepper-step",{attrs:{complete:e.currentStep>2,step:"2"}},[e._v("Filters")]),a("v-divider"),a("v-stepper-step",{attrs:{step:"3"}},[e._v("Alert configuration")])],1),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[a("v-form",[a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{md:"4",sm:"12"}},[a("v-text-field",{attrs:{label:"Rule name*",clearable:""},model:{value:e.ruleName,callback:function(t){e.ruleName=t},expression:"ruleName"}})],1)],1)],1)],1),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.currentStep=2}}},[e._v("Next")]),a("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("closeDialog")}}},[e._v("Close")])],1),a("v-stepper-content",{attrs:{step:"2"}},[a("v-form",[a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{staticClass:"text-center"},[e.filters.length>1?a("small",[e._v(" These "+e._s(e.filters.length)+" filters will be combinated by "),a("strong",[e._v("OR")]),e._v(" operator. ")]):a("small",[e._v(" If the server's hostname or the service's name was changed, you need to reconfig this filter. ")])])],1),e._l(e.filters,(function(t,r){return a("v-row",{key:r,attrs:{justify:"center",align:"center"}},[a("v-col",{attrs:{md:"4",sm:"5",cols:"12"}},[a("v-combobox",{attrs:{label:"Host",dense:"",items:e.selectionHostItems,clearable:""},model:{value:t.modelHost,callback:function(a){e.$set(t,"modelHost",a)},expression:"filter.modelHost"}})],1),a("v-col",{attrs:{md:"4",sm:"5",cols:"10"}},[a("v-combobox",{attrs:{label:"Service(s)",dense:"",items:t.services,"small-chips":"",multiple:"","hide-selected":"","search-input":t.serviceSearchText,disabled:t.disableService,hint:"Type or select from list","persistent-hint":"",clearable:""},on:{"update:searchInput":function(a){return e.$set(t,"serviceSearchText",a)},"update:search-input":function(a){return e.$set(t,"serviceSearchText",a)}},scopedSlots:e._u([{key:"no-data",fn:function(){return[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[e._v(' No results matching "'),a("strong",[e._v(e._s(t.serviceSearchText))]),e._v('", press '),a("code",[e._v("enter")]),e._v(" to create a new one. ")])],1)],1)]},proxy:!0}],null,!0),model:{value:t.modelService,callback:function(a){e.$set(t,"modelService",a)},expression:"filter.modelService"}})],1),a("v-col",{attrs:{md:"2"}},[r===e.filters.length-1?a("v-btn",{attrs:{icon:"",small:"",disabled:"All"===e.firstHostModel},on:{click:e.addEventFilter}},[a("v-icon",{attrs:{small:"",color:"primary"}},[e._v("mdi-plus-circle")])],1):a("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.removeEventFilter(r)}}},[a("v-icon",{attrs:{small:"",color:"primary"}},[e._v("mdi-minus-circle")])],1)],1)],1)}))],2)],1),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.currentStep=3}}},[e._v("Next")]),a("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("closeDialog")}}},[e._v("Close")])],1),a("v-stepper-content",{attrs:{step:"3"}},[a("v-form",[a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{md:"4",sm:"6",cols:"12"}},[a("v-select",{attrs:{label:"Alert channel*",items:e.alertChannels,clearable:""},model:{value:e.modelAlertChannel.type,callback:function(t){e.$set(e.modelAlertChannel,"type",t)},expression:"modelAlertChannel.type"}})],1),a("v-col",{attrs:{md:"4",sm:"6",cols:"12"}},["Slack Webhook"===e.modelAlertChannel.type?a("v-select",{attrs:{label:"Choose a channel",items:e.$store.getters.slack_iwh_alert_channel,"item-text":"name","item-value":"id"},model:{value:e.modelAlertChannel.value,callback:function(t){e.$set(e.modelAlertChannel,"value",t)},expression:"modelAlertChannel.value"}}):"SMTP"===e.modelAlertChannel.type?a("v-select",{attrs:{label:"Choose a channel",items:e.$store.getters.smtp_alert_channel,"item-text":"name","item-value":"id"},model:{value:e.modelAlertChannel.value,callback:function(t){e.$set(e.modelAlertChannel,"value",t)},expression:"modelAlertChannel.value"}}):e._e()],1),"SMTP"===e.modelAlertChannel.type?a("v-col",{attrs:{md:"8",cols:"12"}},[a("v-textarea",{attrs:{label:"Receiver(s)",placeholder:"user@email.com",hint:"Email addresses are separated by enter (newline) character","persistent-hint":"",clearable:""},model:{value:e.modelAlertChannel.smtpReceivers,callback:function(t){e.$set(e.modelAlertChannel,"smtpReceivers",t)},expression:"modelAlertChannel.smtpReceivers"}})],1):e._e()],1)],1)],1),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.saveRule}},[e._v("Save")]),a("v-btn",{attrs:{text:""},on:{click:function(t){return e.$emit("closeDialog")}}},[e._v("Close")])],1)],1)],1)],1)},n=[],o=(a("99af"),a("4160"),a("c975"),a("d81d"),a("a434"),a("b0c0"),a("159b"),a("5530")),s=(a("96cf"),a("1da1")),i=a("bc3a"),l=a.n(i),c=a("56d7"),d={props:{mode:{type:String,default:"NEW"},alertRuleObject:Object},data:function(){return{currentStep:1,ruleName:"Default rule",filters:[{modelHost:null,modelService:[],disableService:!1,serviceSearchText:null,services:null}],modelAlertChannel:{type:null,name:null,value:null,smtpReceivers:null},alertChannels:["Slack Webhook","SMTP"]}},computed:{filtersModelHostArray:function(){return this.filters.map((function(e){return e.modelHost}))},filtersModelServiceArray:function(){return this.filters.map((function(e){return e.modelService}))},selectionHostItems:function(){return["All"].concat(this.$store.getters.host_array)},firstHostModel:function(){return this.filters[0].modelHost}},watch:{filtersModelHostArray:{handler:function(e,t){var a=this,r={item:null,index:-1};if(e.length>t.length)r.item=e[e.length-1],r.index=e.length-1;else if(e.length<t.length);else for(var n=0;n<e.length;n++){var o=e[n],s=t[n];if(o!==s){r.item=o,r.index=n;break}}if(console.warn("TabEditorAlertRule::watch::filtersModelHostArray - changed item:",JSON.stringify(r.item),"- at index:",r.index),"All"===r.item){this.filters[r.index].modelService=["All"],this.filters[r.index].disableService=!0;for(var i=0;i<this.filters.length;i++)i!==r.index&&this.filters.splice(i,1)}else r.item&&(this.filters[r.index].disableService=!1,l.a.get("".concat(this.$GCONFIG.api_base_url,"/api/hostnames/").concat(r.item,"/report")).then((function(e){console.log("TabEditorAlertRule::watch::filtersModelHostArray - API response:",e),e.data&&(a.filters[r.index].services=["All"].concat(e.data))})).catch((function(e){console.log("TabEditorAlertRule::watch::filtersModelHostArray - API error:",e)})))},deep:!0},filtersModelServiceArray:{handler:function(e){console.warn("TabEditorAlertRule::watch::filtersModelServiceArray - val:",JSON.stringify(e));for(var t=0;t<e.length;t++){var a=e[t];if(a){var r=a.indexOf("All");a.length>1&&r>-1&&(r===a.length-1?this.filters[t].modelService=["All"]:this.filters[t].modelService.splice(r,1))}}},deep:!0}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("EDIT"!==e.mode){t.next=25;break}e.ruleName=e.alertRuleObject.name,e.modelAlertChannel=JSON.parse(e.alertRuleObject.alertConf),console.warn(e.alertRuleObject.filters),a=JSON.parse(e.alertRuleObject.filters),r=0;case 6:if(!(r<a.length)){t.next=25;break}return n=a[r],console.warn("....filter:",n),r===e.filters.length&&e.addEventFilter(),e.filters[r].modelHost=n.host,e.filters[r].modelService=n.services,t.prev=12,t.next=15,l.a.get("".concat(e.$GCONFIG.api_base_url,"/api/hostnames/").concat(n.host,"/report"));case 15:o=t.sent,o&&(console.log("TabEditorAlertRule::created() - edit mode - API response:",JSON.stringify(o.data)),o.data&&(e.filters[r].services=["All"].concat(o.data))),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](12),console.log("TabEditorAlertRule::created() - edit mode - API error:",t.t0);case 22:r++,t.next=6;break;case 25:case"end":return t.stop()}}),t,null,[[12,19]])})))()},methods:{addEventFilter:function(){this.filters.push({modelHost:null,modelService:[],disableService:!1,serviceSearchText:null,services:null})},removeEventFilter:function(e){console.log("TabEditorAlertRule::removeEventFilter() - with index:",e),this.filters.splice(e,1)},saveRule:function(){var e=this,t=[];this.filters.forEach((function(e){t.push({host:e.modelHost,services:e.modelService})}));var a=this.modelAlertChannel.value;"SMTP"===this.modelAlertChannel.type?this.$store.getters.smtp_alert_channel.forEach((function(t){t.id===a&&(e.modelAlertChannel.name=t.name)})):this.$store.getters.slack_iwh_alert_channel.forEach((function(t){t.id===a&&(e.modelAlertChannel.name=t.name)}));var r={name:this.ruleName,filters:JSON.stringify(t),alertConf:JSON.stringify(this.modelAlertChannel)};console.log("TabEditorAlertRule::saveRule() - requestObj:",r),"NEW"===this.mode?l.a.post("".concat(this.$GCONFIG.api_base_url,"/api/alert-rules"),r).then((function(t){console.log("TabEditorAlertRule::saveRule() - create response:",t),t.data&&("success"===t.data.status?(c["EventBus"].$emit("NEW_ALERT_RULE_INSERTED",Object(o["a"])({id:t.data.id},r)),e.$emit("closeDialog")):console.warn("TabEditorAlertRule::saveRule() - something is wrongs at backend"))})).catch((function(e){console.log("TabEditorAlertRule::saveRule() - create error:",e)})):l.a.put("".concat(this.$GCONFIG.api_base_url,"/api/alert-rules/").concat(this.alertRuleObject.id),r).then((function(t){console.log("TabEditorAlertRule::saveRule() - update response:",t),t.data&&("success"===t.data.status?(c["EventBus"].$emit("NEW_ALERT_RULE_UPDATED",Object(o["a"])({id:e.alertRuleObject.id},r)),e.$emit("closeDialog")):console.warn("TabEditorAlertRule::saveRule() - something is wrongs at backend"))})).catch((function(e){console.log("TabEditorAlertRule::saveRule() - update error:",e)}))}}},u=d,h=a("2877"),p=a("6544"),v=a.n(p),m=a("8336"),f=a("62ad"),_=a("2b5d"),b=a("a523"),g=a("169a"),C=a("ce7e"),S=a("4bd4"),x=a("132d"),w=a("da13"),k=a("5d23"),y=a("0fd9"),T=a("b974"),E=a("7e85"),A=a("e516"),R=a("9c54"),V=a("56a4"),D=a("8654"),N=a("a844"),O=Object(h["a"])(u,r,n,!1,null,null,null);t["default"]=O.exports;v()(O,{VBtn:m["a"],VCol:f["a"],VCombobox:_["a"],VContainer:b["a"],VDialog:g["a"],VDivider:C["a"],VForm:S["a"],VIcon:x["a"],VListItem:w["a"],VListItemContent:k["a"],VListItemTitle:k["c"],VRow:y["a"],VSelect:T["a"],VStepper:E["a"],VStepperContent:A["a"],VStepperHeader:R["a"],VStepperItems:R["b"],VStepperStep:V["a"],VTextField:D["a"],VTextarea:N["a"]})},f0e8:function(e,t,a){"use strict";var r=a("9ace"),n=a.n(r);n.a}});
//# sourceMappingURL=app.d1617815.js.map